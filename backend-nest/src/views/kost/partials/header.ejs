<!-- backend-nest/src/views/kost/partials/header.ejs -->
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title><%= title || "Kost Admin" %></title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/kost-admin.css">
</head>

<body>
<%
  const _path = String(currentPath || "");
  function isActive(prefix) {
    return _path === prefix || _path.startsWith(prefix + "/");
  }
%>

<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <div class="container container-narrow">
    <a class="navbar-brand fw-bold" href="/admin/kost/stays">Kost Admin</a>

    <div class="navbar-nav flex-wrap">
      <a class="nav-link <%= isActive("/admin/kost/rooms") ? "active" : "" %>" href="/admin/kost/rooms">Rooms</a>
      <a class="nav-link <%= isActive("/admin/kost/room-types") ? "active" : "" %>" href="/admin/kost/room-types">Room Types</a>
      <a class="nav-link <%= isActive("/admin/kost/tenants") ? "active" : "" %>" href="/admin/kost/tenants">Tenants</a>
      <a class="nav-link <%= isActive("/admin/kost/stays") ? "active" : "" %>" href="/admin/kost/stays">Stays</a>

      <a class="nav-link <%= isActive("/admin/kost/inventory/locations") ? "active" : "" %>" href="/admin/kost/inventory/locations">Inventory Locations</a>
      <a class="nav-link <%= isActive("/admin/kost/inventory/items") ? "active" : "" %>" href="/admin/kost/inventory/items">Inventory Items</a>
      <a class="nav-link <%= isActive("/admin/kost/inventory/movements") ? "active" : "" %>" href="/admin/kost/inventory/movements">Inventory Movements</a>
      <a class="nav-link <%= isActive("/admin/kost/inventory/analytics") ? "active" : "" %>" href="/admin/kost/inventory/analytics">Inventory Analytics</a>
      <a class="nav-link <%= isActive("/admin/kost/inventory/balances") ? "active" : "" %>" href="/admin/kost/inventory/balances">Inventory Balances</a>

      <a class="nav-link <%= isActive("/admin/kost/billing") ? "active" : "" %>" href="/admin/kost/billing">Billing</a>
    </div>
  </div>
</nav>

<main class="container container-narrow py-4">
<%
  // flash contract dari res.locals.flash (selalu ada)
  const _f = flash || {};
  const _errors = Array.isArray(_f.errors) ? _f.errors.filter(Boolean) : [];
%>

<% if (_f.success) { %>
  <div class="alert alert-success"><%= _f.success %></div>
<% } %>

<% if (_f.error) { %>
  <div class="alert alert-danger"><%= _f.error %></div>
<% } %>

<% if (_errors.length) { %>
  <div class="alert alert-danger">
    <ul class="mb-0">
      <% _errors.forEach(e => { %>
        <li><%= e %></li>
      <% }) %>
    </ul>
  </div>
<% } %>

<%- include('../partials/header', { title }) %>

<h1>Create Stay</h1>

<% if (error) { %>
  <div style="padding:10px; background:#ffe7e7; border:1px solid #ffb3b3; margin-bottom:12px;">
    <strong>Error:</strong> <%= error %>
  </div>
<% } %>

<form method="POST" action="/admin/kost/stays">
  <div>
    <label>Tenant</label><br/>
    <select name="tenant_id" required>
      <% tenants.forEach(t => { %>
        <option value="<%= t.id %>" <%= String(form.tenant_id||"") === String(t.id) ? "selected" : "" %>>
          <%= t.full_name %>
        </option>
      <% }) %>
    </select>
  </div>

  <div>
    <label>Room (available only)</label><br/>
    <select name="room_id" required>
      <% rooms.forEach(r => { %>
        <option value="<%= r.id %>" <%= String(form.room_id||"") === String(r.id) ? "selected" : "" %>>
          <%= r.room_code %> — <%= r.room_type_code %>
        </option>
      <% }) %>
    </select>
  </div>

  <div>
    <label>Start Date</label><br/>
    <input type="date" name="start_date" required value="<%= form.start_date || "" %>" />
  </div>

  <div>
    <label>End Date (optional)</label><br/>
    <input type="date" name="end_date" value="<%= form.end_date || "" %>" />
  </div>

  <div>
    <label>Monthly Price Override (optional)</label><br/>
    <input type="number" name="monthly_price_override" value="<%= form.monthly_price_override || "" %>" />
  </div>

  <div>
    <label>Deposit Override (optional)</label><br/>
    <input type="number" name="deposit_override" value="<%= form.deposit_override || "" %>" />
  </div>

  <br/>
  <button type="submit">Save</button>
</form>

<br/>
<a href="/admin/kost/stays">← Back</a>

<%- include('../partials/footer') %>
